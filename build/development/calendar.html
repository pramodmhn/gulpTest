<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" ng-app="appCalendar">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
<head>
<title></title>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" type="text/css">
<!-- Font awesome icon -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" />
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" type="text/css">
<!--link rel="stylesheet" href="css/main.css" type="text/css"-->
<link rel="stylesheet" href="css/main.css" type="text/css">
<link rel="stylesheet"  href="css/angular-motion.min.css"  type="text/css">
<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <style>
        .col-sm-offset-1 {
            margin-left: 8.33333333%;
        }

        .col-sm-4 {
            width: 33.33333333%;
        }

        .col-sm-1, .col-sm-10, .col-sm-11, .col-sm-12, .col-sm-2, .col-sm-3, .col-sm-4, .col-sm-5, .col-sm-6, .col-sm-7, .col-sm-8, .col-sm-9 {
            float: left;
        }

        .col-sm-5 {
            width: 41.66666667%;
        }
    </style>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

<!--for IE8-->

</head>
<body ng-controller="calendarController">

<div id="search_bar" class="container search_bar" >
  <div class="search_bar">
    <form class="form-horizontal" action=""
              method="post" name="calendarForm" id="calendarForm" novalidate>     
      <div class="row search_container">
        <div class="col-sm-4">
          <div class="form-group">
            <label for="search_topic" class="col-sm-12 ">Search by topic</label>
            <div class="col-sm-12">
              <!--select class="form-control" name="search_topic" id="search_topic" ng-change="clearTopic()" ng-model="query.Topic" ng-options="obj.notes.Topic as obj.notes.Topic for (key,obj) in calendarData.events | toArray | filter:greaterEqualThan('closure_stamp') | unique:'Topic'"-->
              <select class="form-control" name="search_topic" id="search_topic" ng-change="clearTopic()" ng-model="query.Topic" ng-options="topic as topic for topic in calendarData.collections.notes.Topic">
                <option value="" selected>Select</option>
              </select>
            </div>
          </div>
        </div>
        <div class="col-sm-4">
          <div class="form-group">
            <label for="search_state" class="col-sm-12">Search by region</label>
            <div class="col-sm-12">
              <!--select class="form-control" name="search_state" id="search_state" ng-change="clearRegion()" ng-model="query.Region" ng-options="obj.notes.Region as obj.notes.Region for (key,obj) in calendarData.events | toArray | filter:greaterEqualThan('closure_stamp') | unique:'Region' "-->
              <select class="form-control" name="search_state" id="search_state" ng-change="clearRegion()" ng-model="query.Region" ng-options="region as region for region in calendarData.collections.notes.Region">
                <option value="">Select</option>
              </select>
            </div>           
          </div>
        </div>
       
        <div class="col-sm-4">
          <div class="form-group">
            <label for="search_title" class="col-sm-12 ">Search by Events keyword</label>
            <div class="col-sm-12">
              <input type="text" class="form-control" name="search_title" id="search_title" ng-model="name" placeholder="Search by keyword">
            </div>
           <!-- <div class="col-sm-12"> <a class="btn btn-block" id="seach_submit">Search</a></div>-->
          	<div class="col-sm-12"> <a class="btn btn-block" href="#" ng-click="clearFilter()"> View all events</a> </div>
          </div>
        </div>
        
        
        
      </div>
    </form>
  </div>
</div>

<!-- search bar-->

<div class="container month_calendar">
  <div class="calendar"  ng-cloak>
   <div ng-show="!filterArr.length"  ng-hide="true" class="text-center am-fade">No result found.</div>
    <table id="tbl_events"  width="100%" cellspacing="0" cellpadding="0" style="width: 100%;"  
    ng-repeat="(key, eventsobj) in filterArr = ( calendarData.events | toArray   | filter:{$:query}  | filter:name )  | groupBy: 'monthYear'" class="table table-striped table-hover am-fade"> 
    <!--key is monthYear-->
      <thead>
        <tr>
          <td><table width="100%" cellspacing="0" cellpadding="0">
              <tr>
                <td colspan="6" class="month-heading">{{key}} </td>
              </tr>
              <tr class="header">
                <td class="event">Event Name</td>
                <td class="time-date">Time/Date</td>
                <td class="region">Region</td>
                <td class="host">Host</td>
                <td class="comment">Info</td>
                <td class="booking">Register</td>
              </tr>
            </table></td>
        </tr>
      </thead>
     <tbody>
     <tr>
     <td class="event_container_row">
      <div  ng-repeat="event in eventsobj" 
      ng-init="	defaultColor='#0066cb';
      			styleFromNote_color={color:event.notes.ButtonColor|| defaultColor}; 
      			styleFromNote_bgcolor={'background-color':event.notes.ButtonColor || defaultColor};
      			styleFromNote_border={'border-left':'7px' ,'border-left-style':'solid', 'border-left-color':event.notes.ButtonColor || defaultColor};" class="event_container">
                
       <!--for mobile  -->
        <div class="event_row_mobile detail-container" style="display:none" ng-init="checked=true">
          <table width="100%" cellspacing="0" cellpadding="0" class="table">
            <tr>
              <td class="event-container" ng-click="checked=!checked"><div class="ev_name" ng-style="styleFromNote_color">{{event.name}}</div></td>
            </tr>
            <tr>
              <td class="state-container" ng-click="checked=!checked">
              	<span class="ev_region">{{event.notes.Region}}</span> - <span class="ev_date">{{event.schedule_stamp | dateWithSuffix:"dS M Y"}}</span> 
              	<span class="comment moreinfo" id="expand_event_0" ng-show="checked">[+] More</span><span class="comment moreinfo" id="expand_event_0" ng-show="!checked">[-] Less</span>
              </td>
            </tr>
            <tr>
              <td class="booking"><a class="registration_link btn btn-block" ng-href="{{event.link}}" target="_blank" ng-style="styleFromNote_bgcolor">Register Now</a></td>
            </tr>
          </table>
        </div>
        <!--for mobile end-->
        
        <!--desktop view-->
        <div class="event_row" ng-style="styleFromNote_border" ng-init="checked=true">
          <table width="100%" cellspacing="0" cellpadding="0" class="table table-bordered">
            <tr>
              <td class="event" ng-click="checked=!checked"><div class="ev_name" ng-style="styleFromNote_color">{{event.name}}</div></td>
              <td class="time-date" ng-click="checked=!checked"><div class="ev_date">{{event.schedule_stamp | dateWithSuffix:"dS M Y"}}</div>               
                <div class="ev_time">{{event.prefs.START_TIME}}-{{event.prefs.FINISH_TIME}}</div></td>
              <td class="region" ng-click="checked=!checked"><div class="ev_region">{{event.notes.Region}}</div></td>
              <td class="host" ng-click="checked=!checked"><div class="ev_host">{{event.notes.Host}}</div></td>
              <td class="comment"  ng-click="checked=!checked"><div id="expand_event_0"><span class="moreinfo" ng-show="checked">[+] More</span><span class="moreinfo" ng-show="!checked">[-] Less</span></div></td>
              <td class="booking">
              <a ng-if="todayDate < event.closure_stamp" class="btn registration_link" ng-style="styleFromNote_bgcolor"  ng-href="{{event.link}}" target="_blank">Register Now</a>
              <a ng-if="todayDate >= event.closure_stamp" class="btn registration_link disabled" ng-style="styleFromNote_bgcolor"  ng-href="{{event.link}}" target="_blank">Event Closed</a>
                <div><em class="available_seats"><span  ng-if="todayDate < event.closure_stamp">{{event.remaining_seats}} available seats</span></em></div></td>
            </tr>
          </table>
        </div>
        <!--event row-->
        
        <div class="event_detail am-collapse" id="event_0"  ng-show="!checked" ng-style="styleFromNote_border">
          <table width="100%" cellspacing="0" cellpadding="0" class="">
            <tr>
              <td class="topic" ng-style="styleFromNote_color">Date</td>
              <td class="eventcontents more_info_ev_date">{{event.schedule_stamp | dateWithSuffix:"dS M Y"}}</td>
            </tr>
            <tr>
              <td class="topic" ng-style="styleFromNote_color">Time</td>
              <td class="eventcontents more_info_ev_time">{{event.prefs.START_TIME}}-{{event.prefs.FINISH_TIME}}</td>
            </tr>
            <tr>
              <td class="topic" ng-style="styleFromNote_color">Region</td>
              <td class="eventcontents more_info_ev_region">{{event.notes.Region}}</td>
            </tr>
            <tr>
              <td class="topic" ng-style="styleFromNote_color">Venue</td>
              <td class="eventcontents more_info_ev_venue" ng-bind-html="event.prefs.EV_VENUE"></td>
            </tr>
            <tr>
              <td class="topic" ng-style="styleFromNote_color">Description</td>
              <td class="eventcontents more_info_comment" ng-bind-html="event.prefs.EV_DESC"></td>
            </tr>
            <tr>
              <td class="topic" ng-style="styleFromNote_color">Organiser's name</td>
              <td class="eventcontents more_info_org_name">{{event.prefs.ORG_NAME}}</td>
            </tr>
            <tr>
              <td class="topic" ng-style="styleFromNote_color">Organiser's email</td>
              <td class="eventcontents more_info_org_email">{{event.prefs.ORG_EMAIL}}</td>
            </tr>
            <tr>
              <td class="topic" ng-style="styleFromNote_color">Organiser's phone</td>
              <td class="eventcontents more_info_org_phone">{{event.prefs.EV_PHONE}}</td>
            </tr>
          </table>
        </div>
        
        <div class="divider"></div>
      </div>
      
      <!--event container-->
      </td>
     </tr>
   </table>
   
    <!--event template--> 
    
  </div>
</div>

<!-- month calendar -->
<div class="container imageloader" ng-show="loading" style="text-align:center"> <img src="image/loader.gif" width="50" height="50"> </div>

<!-- footer-->

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script> 
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" type="text/javascript"></script> 
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular.min.js" type="text/javascript"></script> 
<!--script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.5.5/angular-route.min.js" type="text/javascript"></script--> 
<script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.5.5/angular-resource.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.5.5/angular-animate.min.js"type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.5.5/angular-sanitize.min.js"></script>

<!--script src="jquery.dataTables.min.js" type="text/javascript"></script--> 

<script src="app/app.js"></script> 
<script src="app/service/calendarService.js"></script> 
<script src="app/controllers/calendarController.js"></script> 

<script src="js/angular-filter.js"></script>
<script src="js/validate.js"></script>

</body>
</html>
